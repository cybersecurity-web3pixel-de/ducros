XA.component.accordions=function(n){function r(t){var i=n(t),r=n(t).find("img"),u=r.attr("src");u&&(i.parents(".accordion").addClass("accordion-image"),i.css({background:"url("+u+")","background-repeat":"no-repeat","background-size":"cover","background-position":"50% 100%"}),r.hide())}function u(t){var u=n(t).width(),i=n(t).find(".item"),r=0;_.each(i,function(f){var s=n(f).find(".toggle-content"),e=n(f).find(".toggle-header"),o=u-i.length*e.outerWidth();n(f).hasClass("active")&&n(f).css({width:o});s.css({width:n(t).hasClass("accordion-image")?o+e.outerWidth():o-e.outerWidth()-parseInt(e.css("padding"))});n(f).find(".toggle-content").height()>r&&(r=n(f).find(".toggle-content").height())})}function f(n){var t=n[0].id;return n.length>0&&t!=""?t.toLocaleLowerCase():null}function e(f,e){var s="click",o=f.find(".toggle-header");e.expandOnHover&&(s="mouseenter");o.on("mouseover",i.focus);o.on("mouseleave",i.blur);o.on("focus",i.focus);o.on("blur",i.blur);o.on("keyup",function(t){(t.keyCode==13||t.keyCode==32)&&n(this).click()});f.hasClass("accordion-horizontal")&&(n(document).ready(function(){u(f)}),_.each(o,function(n){r(n)}));o.on(s,function(){var r=n(this),i=r.closest(".item"),o=r.parents(".accordion"),u=i.find(".toggle-content"),f=i.siblings(),s=f.find(".toggle-content");o.hasClass("accordion-horizontal")?t.animateHorizontal.call(this,e):(e.canOpenMultiple||(f.removeClass("active"),s.stop().slideUp({duration:e.speed,easing:e.easing})),i.toggleClass("active"),e.canToggle?u.slideToggle({duration:e.speed,easing:e.easing}):u.slideDown({duration:e.speed,easing:e.easing}))})}var t={},i={focus:function(){n(this).addClass("show")},blur:function(){n(this).removeClass("show")}};return t.animateHorizontal=function(t){var r=n(this).parents(".accordion"),i=n(this).closest(".item"),s=i.find(".toggle-header"),f=i.find(".toggle-content"),h=r.find(".item"),e=i.siblings(),c=e.find(".toggle-content"),u,o;i.toggleClass("active");e.removeClass("active");e.stop(!0).animate({width:0},t.speed,t.easing,function(){c.css({display:"none"})});i.hasClass("active")?(u=r.hasClass("accordion-image")?f.outerWidth():r.width()-((h.length-1)*i.outerWidth()+2),o=r.hasClass("accordion-image")?u:u-s.outerWidth(),i.stop(!0).animate({width:u},t.speed,t.easing,function(){}),f.css({width:o,display:"block"})):i.stop(!0).animate({width:0},t.speed,t.easing,function(){f.css({display:"none"})})},t.initInstance=function(t,i){var u,h,o,r,s;if(t.find(".toggle-header").eq(0).attr("tabindex","0"),t.hasClass("toggle")&&n.extend(i,{canToggle:!0}),t.find(".toggle-content").hide(),u=XA.queryString.getQueryParam(f(t)),u!=null)for(h=u.split(","),o=t.find("li"),r=0;r<o.length;r++)s=o[r],h.indexOf(r+"")>-1&&(n(s).addClass("active"),n(s).find(".toggle-content").show());else i.expandedByDefault&&(t.find("li:first-child").addClass("active"),t.find("li:first-child").find(".toggle-content").show());e(t,i)},t.init=function(){var i=n(".accordion:not(.initialized)");i.each(function(){var r=n(this).data("properties"),i=n(this);t.initInstance(i,r);i.addClass("initialized")})},t}(jQuery);XA.register("accordions",XA.component.accordions)